<!DOCTYPE html>
<html>

<head>
</head>

<body>
  <script>
    //;const socket = new WebSocket('wss://queue.strategicaialliance.org:3332');

    // first we connect to socket
    const socket = new WebSocket('ws://localhost:3333');
    socket.addEventListener('open', () => {
      // send action_login: true
      socket.send(JSON.stringify({
        'action_login': true,
        'username': 'xochi',
        'pic': "https://firebasestorage.googleapis.com/v0/b/mysticverse.appspot.com/o/images%2F2vKA3kC108O3XQgpHB3RfGELjST2?alt=media&token=a0d36acf-5a6f-4b33-8b38-9017149cbbd6"
      }));

      // set server know we are still alive every 5 seconds
      setInterval(function () {
        socket.send(JSON.stringify({
          'alive': "true",
        }));
      }, 5000);

      // here we are joining conferance every 2seconds is bug to fix in server..
      setTimeout(function () {
        socket.send(JSON.stringify({
          'action_join_conference': "true",
        }));
      }, 2000);

    });


    // these are event push notifications the server sends to us
    socket.addEventListener('message', event => {
      var data = JSON.parse(event.data)
      if (data.command == 'event_time_expiry') {
        console.log("hide: exit room")
      }
      if (data.command == 'event_go_live') {
        console.log("data=>", data);
        console.log("Go to active and live")
      }
      if (data.command == 'INPUT_TEXT') {
        console.log("input text component")
      }
      if (data.command == 'event_queue_info') {
        // display users in each queue
        console.log("active_users: " + data.active_users)
        console.log("queued_users: " + data.queued_users)
      }
    });

    socket.addEventListener('sendMessage', event => {
      console.log("event data in send message", event);
      // var data = JSON.parse(event.data);
      // console.log("data=>" , data)
    });

  </script>
</body>

</html>
