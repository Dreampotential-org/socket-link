{"ast":null,"code":"import _classCallCheck from\"/home/arosen/socket-link/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/arosen/socket-link/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/arosen/socket-link/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/arosen/socket-link/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/arosen/socket-link/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/* global localStorage, */import React from'react';import'./App.css';import'bootstrap/dist/css/bootstrap.min.css';import{FormControl,Form}from\"react-bootstrap\";import ListOfActiveUsers from'./Components/ListOfActiveUsers.jsx';import ListOfQueueUsers from'./Components/ListOfQueueUsers.jsx';import Accordion from'react-bootstrap/Accordion';import Card from'react-bootstrap/Card';import Button from'react-bootstrap/Button';import Modal from'react-bootstrap/Modal';import{localStorage}from\"node-localstorage\";//Import Socket.io\nimport openSocket from'socket.io-client';// var localStorage = new LocalStorage('./scratch');\n// instance of websocket connection as a class property\nvar socket=new WebSocket('ws://localhost:3333');var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.joinQueue=_this.joinQueue.bind(_assertThisInitialized(_this));_this.leaveQueue=_this.leaveQueue.bind(_assertThisInitialized(_this));_this.state={user:null,videoURL:null,users:null,activeUsers:null,queueUsers:null,showEnter:false,showTimesUp:false,isInQueue:false,name:null,roomName:null,userMessage:null,getTimeSet:null,brodCastText:null,userMessageQueue:\"\"};return _this;}// componentDidMount function call every time render class Component\n_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;socket.onopen=function(){// on connecting, do nothing but log it to the console\nconsole.log('connection open');};// listen to data sent from the websocket(ws) server\nsocket.onmessage=function(event){console.log(\"event =>\",event);//if the message from the server starts with u then it has the user lists in it\nif(event.data[3]==='u'){var allUsers=event.data&&JSON.parse(event.data);if(allUsers.activeUsers&&allUsers.activeUsers.length==3){_this2.setState({users:allUsers,activeUsers:allUsers.activeUsers,queueUsers:allUsers.users,getTimeSet:allUsers.timeStamp});}else{_this2.setState({users:allUsers,activeUsers:allUsers.activeUsers,queueUsers:allUsers.users,getTimeSet:allUsers.timeStamp});}//if it starts with v then it is the URL for the video endpoint\n}else if(event.data[2]==='v'){var url=JSON.parse(event.data);_this2.setState({showEnter:true,videoURL:url.videoUrl});//if it starts with T then it is telling the user that time is up\n}else if(event.data[2]==='T'){_this2.setState({showTimesUp:true});}};socket.onerror=function(err){console.error(\"Socket encountered error: \",err.message,\"Closing socket\");socket.close();};}},{key:\"joinQueue\",//when the user decides to join the 3d verse (puts you in the world if it is not full and the queue if it is full)\nvalue:function joinQueue(data){if(data&&data.activeUsers&&data.users){this.setState({name:data});}else{if(this.state.name.length>0){var MainData={\"name\":this.state.name,\"userMessage\":this.state.userMessage,\"roomName\":this.state.roomName};socket.send(JSON.stringify(MainData));this.setState({isInQueue:true,user:'playaName',userMessageQueue:this.state.userMessage});}}}//when a user decides to leave the queue\n},{key:\"leaveQueue\",value:function leaveQueue(){}//user click on expire button then remove each user from the current user\n},{key:\"ExpireData\",value:function ExpireData(data){data&&data.activeUsers.map(function(dataAll){socket.send(dataAll);});}},{key:\"sendBroadcast\",value:function sendBroadcast(){console.log(\"click to send broadcast message\");// it emits the new message written by the user to the 'chat' channel\n// socket.emit('sendMessage', \"come on main data set here\");\n}},{key:\"render\",value:function render(){var _this3=this;var NameText=function NameText(event){_this3.setState({name:event.target.value});event.preventDefault();};var RoomName=function RoomName(event){_this3.setState({roomName:event.target.value});event.preventDefault();};var MessageText=function MessageText(event){_this3.setState({userMessage:event.target.value});event.preventDefault();};var BroadCastText=function BroadCastText(event){_this3.setState({brodCastText:event.target.value});event.preventDefault();};if(!this.state.showEnter&&!this.state.showTimesUp&&this.state.activeUsers!=null&&this.state.queueUsers!=null){return/*#__PURE__*/React.createElement(Accordion,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Accordion.Toggle,{id:\"queueToggle\",as:Button,variant:\"primary\",eventKey:\"1\"},\"Enter The 3D Verse\"),/*#__PURE__*/React.createElement(Accordion.Collapse,{eventKey:\"1\"},/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Form.Label,null,\"Room Name\"),/*#__PURE__*/React.createElement(FormControl,{placeholder:\"RoomName\",\"aria-label\":\"RoomName\",onChange:function onChange(e){return RoomName(e);},style:{marginBottom:\"10px\",marginTop:\"10px\",width:\"8%\"},defaultValue:this.state.roomName}),/*#__PURE__*/React.createElement(Form.Label,null,\"Name\"),/*#__PURE__*/React.createElement(FormControl,{placeholder:\"Name\",\"aria-label\":\"Name\",onChange:function onChange(e){return NameText(e);},style:{marginBottom:\"10px\",marginTop:\"10px\",width:\"8%\"}}),/*#__PURE__*/React.createElement(Form.Label,null,\"Message\"),/*#__PURE__*/React.createElement(FormControl,{placeholder:\"Message\",\"aria-label\":\"Send Message\",onChange:function onChange(e){return MessageText(e);},style:{marginBottom:\"10px\",marginTop:\"10px\",width:\"8%\"}})),/*#__PURE__*/React.createElement(\"div\",{id:\"userLists\"},/*#__PURE__*/React.createElement(ListOfActiveUsers,{users:this.state.activeUsers,usertextMessage:this.state.userMessage}),/*#__PURE__*/React.createElement(ListOfQueueUsers,{users:this.state.queueUsers,getTimeSet:this.state.getTimeSet})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Number of people waiting join: \",this.state.queueUsers.length.toString())),/*#__PURE__*/React.createElement(Button,{onClick:this.joinQueue},\"Join\"),/*#__PURE__*/React.createElement(\"h3\",null,\"Broadcast\"),/*#__PURE__*/React.createElement(FormControl,{placeholder:\"Broadcast\",\"aria-label\":\"Broadcast\",onChange:function onChange(e){return BroadCastText(e);},style:{marginBottom:\"10px\",marginTop:\"10px\",width:\"8%\"}}),/*#__PURE__*/React.createElement(Button,{id:\"sendMessage\",onClick:this.sendBroadcast},\"Send\"))))));}else if(this.state.showEnter){return/*#__PURE__*/React.createElement(Modal.Dialog,null,/*#__PURE__*/React.createElement(Modal.Body,null,\"You may now enter the 3D verse!\"),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"primary\",href:this.state.videoURL,onClick:function onClick(){_this3.setState({showEnter:false});},target:\"_blank\"},\"Enter\"),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:function onClick(){_this3.setState({showEnter:false});}},\"Close\")));}else if(this.state.showTimesUp){return/*#__PURE__*/React.createElement(Modal.Dialog,null,/*#__PURE__*/React.createElement(Modal.Body,null,\" Times Up!\"),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:function onClick(){_this3.setState({showTimesUp:false});}},\"Close\")));}else if(!this.state.showEnter&&!this.state.showTimesUp&&this.state.activeUsers!=null&&this.state.queueUsers!=null&&this.state.isInQueue){return/*#__PURE__*/React.createElement(Accordion,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Accordion.Toggle,{id:\"queueToggle\",as:Button,variant:\"primary\",eventKey:\"1\"},\"Enter The 3D Verse\"),/*#__PURE__*/React.createElement(Accordion.Collapse,{eventKey:\"1\"},/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(\"div\",{id:\"userLists\"},/*#__PURE__*/React.createElement(ListOfActiveUsers,{users:this.state.activeUsers}),/*#__PURE__*/React.createElement(ListOfQueueUsers,{users:this.state.queueUsers})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"b\",null,\"Number of people waiting Leave: \",this.state.queueUsers.length.toString())),/*#__PURE__*/React.createElement(Button,{onClick:this.leaveQueue},\"Leave\"))))));}else{return/*#__PURE__*/React.createElement(Accordion,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(Accordion.Toggle,{id:\"queueToggle\",as:Button,variant:\"primary\",eventKey:\"1\"},\"Enter The 3D Verse\"),/*#__PURE__*/React.createElement(Accordion.Collapse,{eventKey:\"1\"},/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(\"div\",{id:\"userLists\"}),/*#__PURE__*/React.createElement(Button,{onClick:this.joinQueue},\"Join Queue\")))));}}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/home/arosen/socket-link/my-app/src/App.js"],"names":["React","FormControl","Form","ListOfActiveUsers","ListOfQueueUsers","Accordion","Card","Button","Modal","localStorage","openSocket","socket","WebSocket","App","props","joinQueue","bind","leaveQueue","state","user","videoURL","users","activeUsers","queueUsers","showEnter","showTimesUp","isInQueue","name","roomName","userMessage","getTimeSet","brodCastText","userMessageQueue","onopen","console","log","onmessage","event","data","allUsers","JSON","parse","length","setState","timeStamp","url","videoUrl","onerror","err","error","message","close","MainData","send","stringify","map","dataAll","NameText","target","value","preventDefault","RoomName","MessageText","BroadCastText","e","marginBottom","marginTop","width","toString","sendBroadcast","Component"],"mappings":"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","sourcesContent":["/* global localStorage, */\nimport React from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { FormControl, Form } from \"react-bootstrap\";\nimport ListOfActiveUsers from './Components/ListOfActiveUsers.jsx';\nimport ListOfQueueUsers from './Components/ListOfQueueUsers.jsx'\nimport Accordion from 'react-bootstrap/Accordion';\nimport Card from 'react-bootstrap/Card';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport { localStorage } from \"node-localstorage\";\n//Import Socket.io\nimport openSocket from 'socket.io-client';\n\n// var localStorage = new LocalStorage('./scratch');\n\n// instance of websocket connection as a class property\nconst socket = new WebSocket('ws://localhost:3333');\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.joinQueue = this.joinQueue.bind(this);\n    this.leaveQueue = this.leaveQueue.bind(this);\n    this.state = {\n      user: null,\n      videoURL: null,\n      users: null,\n      activeUsers: null,\n      queueUsers: null,\n      showEnter: false,\n      showTimesUp: false,\n      isInQueue: false,\n      name: null,\n      roomName: null,\n      userMessage: null,\n      getTimeSet: null,\n      brodCastText: null,\n      userMessageQueue: \"\"\n    }\n  }\n\n  // componentDidMount function call every time render class Component\n  componentDidMount() {\n    socket.onopen = () => {\n      // on connecting, do nothing but log it to the console\n      console.log('connection open');\n    }\n\n    // listen to data sent from the websocket(ws) server\n    socket.onmessage = event => {\n      console.log(\"event =>\", event);\n      //if the message from the server starts with u then it has the user lists in it\n      if (event.data[3] === 'u') {\n        const allUsers = event.data && JSON.parse(event.data)\n        if (allUsers.activeUsers && allUsers.activeUsers.length == 3) {\n          this.setState({\n            users: allUsers,\n            activeUsers: allUsers.activeUsers,\n            queueUsers: allUsers.users,\n            getTimeSet: allUsers.timeStamp\n          })\n        } else {\n          this.setState({\n            users: allUsers,\n            activeUsers: allUsers.activeUsers,\n            queueUsers: allUsers.users,\n            getTimeSet: allUsers.timeStamp\n          })\n        }\n        //if it starts with v then it is the URL for the video endpoint\n      } else if (event.data[2] === 'v') {\n        const url = JSON.parse(event.data)\n        this.setState({\n          showEnter: true,\n          videoURL: url.videoUrl\n        })\n        //if it starts with T then it is telling the user that time is up\n      } else if (event.data[2] === 'T') {\n        this.setState({\n          showTimesUp: true\n        })\n      }\n    }\n\n    socket.onerror = err => {\n      console.error(\n        \"Socket encountered error: \",\n        err.message,\n        \"Closing socket\"\n      );\n      socket.close();\n    };\n  };\n\n  //when the user decides to join the 3d verse (puts you in the world if it is not full and the queue if it is full)\n  joinQueue(data) {\n    if (data && data.activeUsers && data.users) {\n      this.setState({\n        name: data,\n      })\n    } else {\n      if (this.state.name.length > 0) {\n        let MainData = { \"name\": this.state.name, \"userMessage\": this.state.userMessage, \"roomName\": this.state.roomName };\n        socket.send(JSON.stringify(MainData));\n        this.setState({\n          isInQueue: true,\n          user: 'playaName',\n          userMessageQueue: this.state.userMessage\n        })\n      }\n    }\n  }\n\n  //when a user decides to leave the queue\n  leaveQueue() {\n\n  }\n\n  //user click on expire button then remove each user from the current user\n  ExpireData(data) {\n    data && data.activeUsers.map((dataAll) => {\n      socket.send(dataAll);\n    });\n  }\n\n  sendBroadcast() {\n    console.log(\"click to send broadcast message\");\n    // it emits the new message written by the user to the 'chat' channel\n    // socket.emit('sendMessage', \"come on main data set here\");\n  }\n\n  render() {\n    const NameText = event => {\n      this.setState({ name: event.target.value });\n      event.preventDefault();\n    };\n\n    const RoomName = event => {\n      this.setState({ roomName: event.target.value });\n      event.preventDefault();\n    };\n\n    const MessageText = event => {\n      this.setState({ userMessage: event.target.value });\n      event.preventDefault();\n    }\n\n    const BroadCastText = event => {\n      this.setState({ brodCastText: event.target.value });\n      event.preventDefault();\n    };\n\n    if (!this.state.showEnter && !this.state.showTimesUp && this.state.activeUsers != null && this.state.queueUsers != null) {\n      return (\n        <Accordion>\n          <Card>\n            <Accordion.Toggle id=\"queueToggle\" as={Button} variant='primary' eventKey=\"1\">\n              Enter The 3D Verse\n            </Accordion.Toggle>\n            <Accordion.Collapse eventKey=\"1\">\n              <Card.Body>\n                <div>\n                  <Form.Label>Room Name</Form.Label>\n                  <FormControl\n                    placeholder=\"RoomName\"\n                    aria-label=\"RoomName\"\n                    onChange={(e) => RoomName(e)}\n                    style={{ marginBottom: \"10px\", marginTop: \"10px\", width: \"8%\" }}\n                    defaultValue={this.state.roomName}\n                  />\n                  <Form.Label>Name</Form.Label>\n                  <FormControl\n                    placeholder=\"Name\"\n                    aria-label=\"Name\"\n                    onChange={(e) => NameText(e)}\n                    style={{ marginBottom: \"10px\", marginTop: \"10px\", width: \"8%\" }}\n                  />\n                  <Form.Label>Message</Form.Label>\n                  <FormControl\n                    placeholder=\"Message\"\n                    aria-label=\"Send Message\"\n                    onChange={(e) => MessageText(e)}\n                    style={{ marginBottom: \"10px\", marginTop: \"10px\", width: \"8%\" }}\n                  />\n                </div>\n                <div id='userLists'>\n                  <ListOfActiveUsers users={this.state.activeUsers} usertextMessage={this.state.userMessage} />\n                  <ListOfQueueUsers users={this.state.queueUsers} getTimeSet={this.state.getTimeSet} />\n                </div>\n                <div>\n                  <p><b>Number of people waiting join: {this.state.queueUsers.length.toString()}</b></p>\n                  <Button onClick={this.joinQueue}>Join</Button>\n                  <h3 >Broadcast</h3>\n                  <FormControl\n                    placeholder=\"Broadcast\"\n                    aria-label=\"Broadcast\"\n                    onChange={(e) => BroadCastText(e)}\n                    style={{ marginBottom: \"10px\", marginTop: \"10px\", width: \"8%\" }}\n                  />\n                  <Button id=\"sendMessage\" onClick={this.sendBroadcast}>Send</Button>\n                </div>\n              </Card.Body>\n            </Accordion.Collapse>\n          </Card>\n        </Accordion>\n      );\n    } else if (this.state.showEnter) {\n      return (\n        <Modal.Dialog>\n          <Modal.Body>\n            You may now enter the 3D verse!\n              </Modal.Body>\n          <Modal.Footer>\n            {/* <Button variant='primary' href={this.state.videoURL} target=\"_blank\">Enter</Button> */}\n            <Button variant='primary' href={this.state.videoURL} onClick={() => { this.setState({ showEnter: false }) }} target=\"_blank\">Enter</Button>\n            <Button variant='primary' onClick={() => { this.setState({ showEnter: false }) }}>Close</Button>\n          </Modal.Footer>\n        </Modal.Dialog>\n      )\n    } else if (this.state.showTimesUp) {\n      return (\n        <Modal.Dialog>\n          <Modal.Body> Times Up!</Modal.Body>\n          <Modal.Footer>\n            <Button variant='primary' onClick={() => { this.setState({ showTimesUp: false }) }}>Close</Button>\n          </Modal.Footer>\n        </Modal.Dialog>\n      )\n    } else if (!this.state.showEnter && !this.state.showTimesUp && this.state.activeUsers != null && this.state.queueUsers != null && this.state.isInQueue) {\n      return (\n        <Accordion>\n          <Card>\n            <Accordion.Toggle id=\"queueToggle\" as={Button} variant='primary' eventKey=\"1\">\n              Enter The 3D Verse\n          </Accordion.Toggle>\n            <Accordion.Collapse eventKey=\"1\">\n              <Card.Body>\n                <div id='userLists'>\n                  <ListOfActiveUsers users={this.state.activeUsers} />\n                  <ListOfQueueUsers users={this.state.queueUsers} />\n                </div>\n                <div>\n                  <p><b>Number of people waiting Leave: {this.state.queueUsers.length.toString()}</b></p>\n                  <Button onClick={this.leaveQueue}>Leave</Button>\n                </div>\n              </Card.Body>\n            </Accordion.Collapse>\n          </Card>\n        </Accordion>\n      );\n    } else {\n      return (\n        <Accordion>\n          <Card>\n            <Accordion.Toggle id=\"queueToggle\" as={Button} variant='primary' eventKey=\"1\">\n              Enter The 3D Verse\n            </Accordion.Toggle>\n            <Accordion.Collapse eventKey=\"1\">\n              <Card.Body>\n                <div id='userLists'>\n                </div>\n                <Button onClick={this.joinQueue}>Join Queue</Button>\n              </Card.Body>\n            </Accordion.Collapse>\n          </Card>\n        </Accordion>\n      );\n    }\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}